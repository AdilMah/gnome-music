NULL =

gdprivate_cflags =				\
	-I$(top_srcdir)				\
	-DPREFIX=\"$(prefix)\"			\
	-DLIBDIR=\"$(libdir)\"			\
	-DG_LOG_DOMAIN=\"Gdprivate\"		\
	-DG_DISABLE_DEPRECATED			\
	$(LIBGD_CFLAGS)				\
	$(NULL)

gdprivate_source_h =				\
	gd.h					\
	gd-entry-focus-hack.h			\
	gd-main-toolbar.h			\
	gd-margin-container.h			\
	gd-tagged-entry.h			\
	gd-toggle-pixbuf-renderer.h		\
	gd-two-lines-renderer.h			\
	gd-main-view-generic.h			\
	gd-main-icon-view.h			\
	$(NULL)

gdprivate_source_c =				\
	gd-entry-focus-hack.c			\
	gd-main-toolbar.c			\
	gd-margin-container.c			\
	gd-tagged-entry.c			\
	gd-toggle-pixbuf-renderer.c		\
	gd-two-lines-renderer.c			\
	gd-main-view-generic.c			\
	gd-main-icon-view.c			\
	$(NULL)

pkglib_LTLIBRARIES = libgdprivate-1.0.la

libgdprivate_1_0_la_LIBADD =			\
	$(LIBGD_LIBS)				\
	$(LIBM)					\
	$(NULL)

libgdprivate_1_0_la_LDFLAGS =			\
	-avoid-version

libgdprivate_1_0_la_CPPFLAGS =			\
	$(gdprivate_cflags)

libgdprivate_1_0_la_SOURCES =			\
	$(gdprivate_source_h)			\
	$(gdprivate_source_c)			\
	$(NULL)

include $(INTROSPECTION_MAKEFILE)

INTROSPECTION_GIRS = Gd-1.0.gir

Gd-1.0.gir: libgdprivate-1.0.la Makefile
Gd_1_0_gir_NAMESPACE = Gd
Gd_1_0_gir_VERSION = 1.0
Gd_1_0_gir_LIBS = libgdprivate-1.0.la
Gd_1_0_gir_CFLAGS = $(AM_CPPFLAGS) $(gdprivate_cflags)
Gd_1_0_gir_SCANNERFLAGS =				\
	--warn-all					\
	--symbol-prefix=gd				\
	--identifier-prefix=Gd				\
        --c-include="libgd/gd.h"			\
	$(NULL)

Gd_1_0_gir_INCLUDES =				\
	Gtk-3.0					\
	$(NULL)

Gd_1_0_gir_FILES =				\
	$(gdprivate_source_h:%=$(srcdir)/%)	\
	$(gdprivate_source_c:%=$(srcdir)/%)	\
	$(NULL)

VAPIS = gd-1.0.vapi
BUILT_SOURCES = $(VAPIS)

gd-1.0.vapi: $(builddir)/Gd-1.0.gir
	$(AM_V_GEN)$(VAPIGEN)						\
		--vapidir=$(top_srcdir)/vapi/upstream	\
		--library gd-1.0						\
		--pkg gio-2.0							\
		--pkg gobject-2.0						\
		--pkg gtk+-3.0							\
		$<

EXTRA_DIST = $(VAPIS)

MAINTAINERCLEANFILES = $(INTROSPECTION_GIRS) $(VAPIS)
